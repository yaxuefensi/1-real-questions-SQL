
1. what is the session/user in the last 30 days?
Table： session
column: date| sessionid | userid | event


2. display the distribution of time(in minutes) spent by each user per day
Table session
column: date| sessionid | userid | event
Table time
column: date | sessionid | time( in seconds) |userid













写了一下，觉得需要clarify一些东西，求指点
1
--Do we want all sessions/#users, or all distinct sessions/#users
--Assume that we might need dedup
Select ifnull(count(distinct sessionid) *1.00/count(distinct userid),0) as session_user
From session
Where date between curdate()-’1’ day and curdate()-’30’day;

2.
--Time (minutes), #users
--We need to justify whether all time>0 for all sessionid? If yes,
Select date,
Time_spend,
count(userid) as users
From
(
Select date,
userid,
sum(ifnull(time,0)/60) as time_spend
From time
Group by 1,2
)t
Group by 1,2;

--There might be cases where not all session time are recorded in time table, or some sessions’s time is 0

Select date,
Time_spend,
count(userid) as no_users
From
(
Select a.date,
A.userid,
sum(ifnull(b.time,0)/50) as time_spend. visit 1point3acres for more.
From session a. 一亩-三分-地，独家发布
Left join time b
On a.date=b.date
And a.userid=b.userid. from: 1point3acres 
And a.sessionid=b.sessionid
Group by 1,2
)t
Group by 1,2;

第二题和你的第一种写的一样。
第一题有个问题：一般来说session id当天针对一个user来说不会重复吧，但如果是这三十天内，如果只算distinct(session_id)是不
是会漏算掉那些虽然是不同天，但是session_id恰好相同的情况呢？


多谢指点，我觉得你说的有道理. From 1point 3acres bbs
这个可能得问面试官，session last有多长，我的理解是很多情况下24小时就expire


楼主。。原谅我的理解力，麻烦能不能解释一下第一题是什么意思吗？我没明白。。。。是每天每个user 有不同的session，然后
要求percentage of total session by all users?
